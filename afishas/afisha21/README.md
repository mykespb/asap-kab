События АП -- подход 2021
=====================================

Новый подход с расширениями на ВБА и Описи
-------------------------------------

Автор: Михаил Колодин

Дата начала: 2021-01-01

Дата правки: 2021-05-01

Версия: 1.6.2.

Задача
-------------------------------------

Разработать и создать 
полный целостный пополняемый распределённый развиваемый
архив-афишу событий авторской песни.

Решение
-------------------------------------

Здесь представлена общая информация.
Подробные описания этапов -- внутри каталогов самих этапов.

### Этап 1 - Получить данные с сайта БА-СПб

Получить данные с сайта БА-СПб -- ОК

### Этап 2 - Объединить с историческими данными

Объединить с имеющимися историческими данными. -- OK

Объединить колонки по максимальному набору.
Добавить uuid.

### Этап 3 - Почистить результат

Почистить результат. -- ОК

Переделать datesql в dtsql, включив туда и время.

Учесть отмены концертов. -- 29 раз

Чистим:
- редактором БД
- питоном
- ручной правкой (лучше нет).

Выкладывание проекта на github.

### Этап 4 - Правка структуры БД

Правка структуры БД на перспективу

Добавление столбцов про тип события.
Добавление столбца про жанр события.
Правка столбца про статус.
Правка столбца про видимость.
Добавление столбцов про организацию и ведущих.
Добавить в БД таблицы и столбцы оргов и т.п.

Добавить столбцы в json:
- jsonafter json -- параметры события (ведущий, цены, число зрителей, кто и какие делал записи, фото, и т.п.)
- jsonrefs json -- ссылки на сетевые ресурсы 
- jsonetc josn -- всё прочее, что можно извлечь по данным, указанным человеком
- jsonnotes json -- все примечания. оставленнеые редакторами
  [{person: "id/uuid", dtcre: "iso", dtmod: "iso", note: "text", uuid: "uuid of note"}]
- jsonauto json -- всё, что автоматически найдёт и заполнит робот

Обработать данные, получив дополнительные сведения о ценах, оргах, местах и т.п.

Согласовать правки с работающим сайтом.

### Этап 5 - Многоредакторский сайт

Многоредакторский сайт

Добавить в БД столбец "дата-время последней правки", "кто правил".
Полноценные данные о редакторах сайта - в отдельной таблице.
Более сложный парольный вход.

Таблица с логами, ротация логов по крону,

Возможность отката некоторых правок.

Взаимодействие ведущих, админов, информаторов:
чат на сайте, сайтовая почта, взаимные блокноты.

Блокноты самих ведущих -- для себя.

Сообщение между ведущими и админом -- персонально.

Новости системы:

Проработка расределённой системы,
со многими сайтами, админами, ведущими, оргами.

Взаимодействие с оргами, переписка, напоминания, запросы, уточнения.

### Этап 6 - Подготовка к формату ВБА

Подготовка к статусу - формату ВБА

Добавление столбцов про географию.

Добавить в БД таблицы и столбцы географии и пр. юридические, географические, административные, временные сведения для полуавтоматической обработки.

Провести автообработку.

### Этап 7 - Добавить исторические данные

Добавить архивные, исторические данные (после переформатирования и обработки): 

- сайт Востока
- архивы ВБА
- архивы Доброхота
- архивы Тулы
- архивы Москвы
- ...

Подготовить и провести автообработку.

### Этап 8 - Взаимно подготовить сайт и архив

Взаимно подготовить сайт и архив.

Подготовить БД к выкладыванию на сайт.
Подготовить новый сайт к выкладыванию данных.
Ввести административные меры,
создать ведущих и прочих участников с различными ролями и правами,
ввести логи, их обработку.
Обеспечить связь информации о событиях, клубах, площадках, и т.п.

### Этап 9 - Согласовать сайт и рассылку на subscribe.ru

Согласовать сайт и рассылку на subscribe.ru, 

подготовить txt и html версии рассылки,
причём многотабличные: 
собственно события, 
клубы и площадки, участвующие в этих событиях,
прочие материалы, с ними связанные,
а также общеполитические, общекультурные явления, 
санитарные правила, 
объявления свои и чужие,
ссылки на сайты и рассылки,
другая поезная информация.

### Этап 10 - Выложить на гуглотаблицы и описание на гуглодоки

Выложить на гуглотаблицы и описание на гуглодоки.

Дать ссылки и обсудить на форуме ЦАПа и т.п.

### Этап 11 - Согласовать с Описями

Согласовать с Описями архивов архивистами. 

в т.ч. с Народными Описями.

### Этап 12 - Организовать соместную работу сайта и Описей и пр.

Организовать соместную работу сайта и Описей, сайтов ВБА и локальных БА,

большой API (взаимный).

### Этап 13 - Полезный пользовательский интерфейс

ППИ - Полезный пользовательский интерфейс: 

выдачи по запросам, умный поиск, аналитика, диаграммы, сводки и т.п.
переходы к мультимедийным материалам, 
связанным с событиями, авторами, исполнителями, клубами, организаторами, 
внешними событиями и т.п.

### Этап 14 - Объединить сайт Событий с полным каталогом авторов и пр.

Объединить сайт Событий (БардАфиши) с полным архивом (каталогом) авторов и т.п.

(расширенные избранные места с bards.ru, bard.ru и т.п.),
прочие места,
добиться автоматического обновления и согласования.


Реализация
--------------------------------------

...

Примечания
--------------------------------------

http://www.bard-afisha.spb.ru/

https://github.com/NixOS/nixpkgs/issues/66526

